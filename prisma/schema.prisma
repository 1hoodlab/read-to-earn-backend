// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

generator dbml {
    provider = "prisma-dbml-generator"
}

model user {
    id                   String      @id @unique @default(uuid())
    username             String
    password             String
    avatar               String?
    email                String
    first_name           String?
    last_name            String?
    token_expiry_date    DateTime?   @db.Timestamp(6)
    verify_email_token   String?     @db.VarChar
    reset_password_token String?     @db.VarChar
    auth_email_google    String?     @unique @db.VarChar // login with google will save for here
    auth_metamask_wallet String?     @unique @db.VarChar // login with metamask - feature for web3
    time_send_token      DateTime?   @db.Timestamp(6) // set time for token and check resend token after 5 minutes
    role                 Role        @default(reader)
    stars                Int         @default(0)
    created_at           DateTime    @default(now())
    updated_at           DateTime?   @updatedAt @db.Timestamp(6)
    user_token           user_token?
}

model user_token {
    id Int @id @default(autoincrement())

    refresh_token       String?
    refresh_token_times Int?
    access_token        String

    user_id String @unique
    user    user   @relation(fields: [user_id], references: [id])
}

enum Role {
    writer
    reader
}
